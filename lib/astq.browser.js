/*
**  ASTq -- Abstract Syntax Tree (AST) Query Engine
**  Copyright (c) 2014-2016 Ralf S. Engelschall <rse@engelschall.com>
**
**  Permission is hereby granted, free of charge, to any person obtaining
**  a copy of this software and associated documentation files (the
**  "Software"), to deal in the Software without restriction, including
**  without limitation the rights to use, copy, modify, merge, publish,
**  distribute, sublicense, and/or sell copies of the Software, and to
**  permit persons to whom the Software is furnished to do so, subject to
**  the following conditions:
**
**  The above copyright notice and this permission notice shall be included
**  in all copies or substantial portions of the Software.
**
**  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
**  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
**  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
**  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
**  CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
**  TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
**  SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/

(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.ASTQ = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
(function (global){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.ASTY=e()}}(function(){return function e(n,t,r){function o(u,a){if(!t[u]){if(!n[u]){var f="function"==typeof _dereq_&&_dereq_;if(!a&&f)return f(u,!0);if(i)return i(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var c=t[u]={exports:{}};n[u][0].call(c.exports,function(e){var t=n[u][1][e];return o(t?t:e)},c,c.exports,e,n,t,r)}return t[u].exports}for(var i="function"==typeof _dereq_&&_dereq_,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),u=function(){function e(){r(this,e)}return i(e,[{key:"init",value:function(e,n,t,r){if(arguments.length<2)throw new Error("init: invalid number of arguments");if(this.ctx=e,this.ASTy=!0,this.T=n,this.L={L:0,C:0,O:0},this.A={},this.C=[],this.P=null,"object"===("undefined"==typeof t?"undefined":o(t)))for(var i in t)t.hasOwnProperty(i)&&this.set(i,t[i]);return"object"===("undefined"==typeof r?"undefined":o(r))&&r instanceof Array&&this.add(r),this}},{key:"type",value:function(e){if(0===arguments.length)return this.T;if(1===arguments.length)return this.T=e,this;throw new Error("type: invalid number of arguments")}},{key:"pos",value:function(e,n,t){if(0===arguments.length)return{line:this.L.L,column:this.L.C,offset:this.L.O};if(arguments.length<=3)return this.L.L=e||0,this.L.C=n||0,this.L.O=t||0,this;throw new Error("pos: invalid number of arguments")}},{key:"set",value:function(){for(var e=this,n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];if(1===t.length&&"object"===o(t[0]))Object.keys(t[0]).forEach(function(n){e.A[n]=t[0][n]});else{if(2!==t.length)throw new Error("set: invalid number of arguments");this.A[t[0]]=t[1]}return this}},{key:"unset",value:function(){for(var e=this,n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];if(1===t.length&&"object"===o(t[0])&&t[0]instanceof Array)t[0].forEach(function(n){delete e.A[n]});else{if(1!==t.length)throw new Error("unset: invalid number of arguments");delete this.A[t[0]]}return this}},{key:"get",value:function(e){if(1!==arguments.length)throw new Error("get: invalid number of arguments");if("string"!=typeof e)throw new Error("get: invalid key argument");return this.A[e]}},{key:"attrs",value:function(){return Object.keys(this.A)}},{key:"nth",value:function(){if(null===this.P)return 1;var e=this.P.C.indexOf(this);if(e<0)throw new Error("nth: internal error -- node not in childs of its parent");return e}},{key:"ins",value:function(e){for(var n=this,t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];if(0===r.length)throw new Error("ins: invalid number of arguments");if(e<0&&(e=this.C.length+1-e),!(0<=e&&e<=this.C.length))throw new Error("ins: invalid position");var u=function(t){if(!n.ctx.isA(t))throw new Error("ins: invalid AST node argument");n.C.splice(e++,0,t),t.P=n};return r.forEach(function(e){"object"===("undefined"==typeof e?"undefined":o(e))&&e instanceof Array?e.forEach(function(e){u(e)}):null!==e&&u(e)}),this}},{key:"add",value:function(){for(var e=this,n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];if(0===t.length)throw new Error("add: invalid number of arguments");var i=function(n){if(!e.ctx.isA(n))throw new Error("add: invalid AST node argument");e.C.push(n),n.P=e};return t.forEach(function(e){"object"===("undefined"==typeof e?"undefined":o(e))&&e instanceof Array?e.forEach(function(e){i(e)}):null!==e&&i(e)}),this}},{key:"del",value:function(){for(var e=this,n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];if(0===t.length)throw new Error("del: invalid number of argument");return t.forEach(function(n){if(!e.ctx.isA(n))throw new Error("del: invalid AST node argument");for(var t=!1,r=0;r<e.C.length;r++)if(e.C[r]===n){e.C.splice(r,1),n.P=null,t=!0;break}if(!t)throw new Error("del: AST node not found in childs")}),this}},{key:"childs",value:function(){return this.C}},{key:"parent",value:function(){return this.P}},{key:"serialize",value:function(){return this.ctx.serialize(this.ctx,this)}}]),e}();t.default=u},{}],2:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),u=function(){function e(){r(this,e)}return i(e,[{key:"dump",value:function(e){void 0===e&&(e=1/0);var n="";return this.walk(function(t,r){if(!(r>e)){for(var i=0;i<r;i++)n+="    ";n+=t.T+" ";var u=Object.keys(t.A);u.length>0&&!function(){n+="(";var e=!0;u.forEach(function(r){e?e=!1:n+=", ",n+=r+": ";var i=t.A[r];!function(){switch("undefined"==typeof i?"undefined":o(i)){case"boolean":case"number":n+=i.toString();break;case"string":var e=function(e){return e.charCodeAt(0).toString(16).toUpperCase()};n+='"'+i.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(n){return"\\x0"+e(n)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(n){return"\\x"+e(n)}).replace(/[\u0100-\u0FFF]/g,function(n){return"\\u0"+e(n)}).replace(/[\u1000-\uFFFF]/g,function(n){return"\\u"+e(n)})+'"';break;case"object":n+=i instanceof RegExp?i.source:JSON.stringify(i);break;default:n+=JSON.stringify(i)}}()}),n+=") "}(),n+="["+t.L.L+"/"+t.L.C+"]\n"}},"downward"),n}}]),e}();t.default=u},{}],3:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),i=function(){function e(){r(this,e)}return o(e,[{key:"merge",value:function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.ctx.isA(e))throw new Error("merge: invalid AST node argument");if(t){var o=e.pos();this.pos(o.L,o.C,o.O)}return e.attrs().forEach(function(t){var o="undefined"!=typeof r[t]?r[t]:t;null!==o&&n.set(o,e.get(t))}),e.childs().forEach(function(e){n.add(e)}),this}}]),e}();t.default=i},{}],4:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),u=function(){function e(){r(this,e)}return i(e,null,[{key:"serialize",value:function(e,n){var t=function e(n){var t={T:n.T,L:{L:n.L.L,C:n.L.C,O:n.L.O}},r=Object.keys(n.A);return r.length>0&&(t.A={},r.forEach(function(e){var r=n.A[e];switch("undefined"==typeof r?"undefined":o(r)){case"boolean":case"number":case"string":t.A[e]=r;break;default:t.A[e]=JSON.parse(JSON.stringify(r))}})),n.C.length>0&&(t.C=n.C.map(function(n){return e(n)})),t};if(!e.isA(n))throw new Error("serialize: not an ASTy node");return JSON.stringify({ASTy:t(n)})}},{key:"unserialize",value:function(e,n){var t=function n(t){var r=e.create(t.T);return r.pos(t.L.L,t.L.C,t.L.O),"object"===o(t.A)&&Object.keys(t.A).forEach(function(e){var n=t.A[e];switch("undefined"==typeof n?"undefined":o(n)){case"boolean":case"number":case"string":r.set(e,n);break;default:r.set(e,JSON.parse(JSON.stringify(n)))}}),"object"===o(t.C)&&t.C instanceof Array&&r.add(t.C.map(function(e){return n(e)})),r},r=JSON.parse(n);if("object"!==("undefined"==typeof r?"undefined":o(r))||"object"!==o(r.ASTy))throw new Error("unserialize: not an ASTy JSON export");return t(r.ASTy)}}]),e}();t.default=u},{}],5:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={major:1,minor:4,micro:8,date:20161120};t.default=r},{}],6:[function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),i=function(){function e(){r(this,e)}return o(e,[{key:"walk",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"downward",t=function t(r,o,i){"downward"!==n&&"both"!==n||e.call(null,r,o,i,"downward"),r.C.forEach(function(e){t(e,o+1,r)}),"upward"!==n&&"both"!==n||e.call(null,r,o,i,"upward")};return t(this,0,null),this}}]),e}();t.default=i},{}],7:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),a=e("./asty-base.js"),f=r(a),s=e("./asty-merge.js"),c=r(s),l=e("./asty-walk.js"),y=r(l),d=e("./asty-dump.js"),h=r(d),p=e("./asty-serialize.js"),v=r(p),b=e("./asty-version.js"),g=r(b),m=function(){function e(){var n=this;o(this,e),this.ASTYNode=function(){};var t=[[f.default,"init","type","pos","set","unset","get","attrs","nth","ins","add","del","childs","parent","serialize"],[c.default,"merge"],[y.default,"walk"],[h.default,"dump"]];return t.forEach(function(e){var t=e[0].prototype;e.slice(1).forEach(function(e){n.ASTYNode.prototype[e]=t[e]})}),this}return u(e,[{key:"version",value:function(){return g.default}},{key:"extend",value:function(e){for(var n in e)e.hasOwnProperty(n)&&(this.ASTYNode.prototype[n]=e[n]);return this}},{key:"create",value:function(e){return(new this.ASTYNode).init(this,e)}},{key:"isA",value:function(e){return"object"===("undefined"==typeof e?"undefined":i(e))&&e instanceof this.ASTYNode&&"boolean"==typeof e.ASTy&&e.ASTy===!0}},{key:"serialize",value:function(e){return v.default.serialize(this,e)}},{key:"unserialize",value:function(e){return v.default.unserialize(this,e)}}]),e}();n.exports=m},{"./asty-base.js":1,"./asty-dump.js":2,"./asty-merge.js":3,"./asty-serialize.js":4,"./asty-version.js":5,"./asty-walk.js":6}]},{},[1,2,3,4,5,6,7])(7)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],2:[function(_dereq_,module,exports){
(function (global){
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.CacheLRU=e()}}(function(){return function e(t,n,i){function r(u,s){if(!n[u]){if(!t[u]){var l="function"==typeof _dereq_&&_dereq_;if(!s&&l)return l(u,!0);if(o)return o(u,!0);var h=new Error("Cannot find module '"+u+"'");throw h.code="MODULE_NOT_FOUND",h}var a=n[u]={exports:{}};t[u][0].call(a.exports,function(e){var n=t[u][1][e];return r(n?n:e)},a,a.exports,e,t,n,i)}return n[u].exports}for(var o="function"==typeof _dereq_&&_dereq_,u=0;u<i.length;u++)r(i[u]);return r}({1:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){return i(this,e),this._index={},this._LRU={newer:null},this._MRU={older:null},this._LRU.newer=this._MRU,this._MRU.older=this._LRU,this._cur=0,this._max=1/0,this._dispose=function(){},this}return r(e,[{key:"limit",value:function(e){var t=this._max;return arguments.length>0&&(this._max=e,this._purge()),t}},{key:"dispose",value:function(e){return this._dispose=e,this}},{key:"length",value:function(){return this._cur}},{key:"keys",value:function(){return this.each(function(e,t){this.push(t)},[])}},{key:"values",value:function(){return this.each(function(e){this.push(e)},[])}},{key:"each",value:function(e,t){arguments<2&&(t=this);for(var n=0,i=this._MRU.older;i!==this._LRU;)e.call(t,i.val,i.key,n++),i=i.older;return t}},{key:"has",value:function(e){var t=this._index[e];return void 0!==t}},{key:"peek",value:function(e){var t=this._index[e];if(void 0!==t)return t.expires<Date.now()?void this.del(t.key):t.val}},{key:"touch",value:function(e){var t=this._index[e];if(void 0===t)throw new Error("touch: no such item");return this._promote(t),this}},{key:"get",value:function(e){var t=this._index[e];if(void 0!==t)return t.expires<Date.now()?void this.del(t.key):(this._promote(t),t.val)}},{key:"set",value:function(e,t,n){arguments.length<3&&(n=1/0),n+=Date.now();var i=this._index[e];if(void 0===i)i={older:null,newer:null,key:e,val:t,expires:n},this._index[e]=i,this._attach(i),this._cur++,this._purge();else{var r=i.val;i.val=t,this._promote(i),this._dispose.call(void 0,i.key,r,"set")}return this}},{key:"del",value:function(e){var t=this._index[e];if(void 0===t)throw new Error("del: no such item");return delete this._index[e],this._detach(t),this._cur--,this._dispose.call(void 0,e,t.val,"del"),this}},{key:"clear",value:function(){for(;this._cur>0;)this.del(this._LRU.newer.key);return this}},{key:"_purge",value:function(){for(;this._cur>this._max;)this.del(this._LRU.newer.key)}},{key:"_promote",value:function(e){this._detach(e),this._attach(e)}},{key:"_detach",value:function(e){e.older.newer=e.newer,e.newer.older=e.older,e.older=null,e.newer=null}},{key:"_attach",value:function(e){e.older=this._MRU.older,e.newer=this._MRU,e.newer.older=e,e.older.newer=e}}]),e}();t.exports=o},{}]},{},[1])(1)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],3:[function(_dereq_,module,exports){
(function (global){
!function(e,n,r){"function"==typeof define&&"undefined"!=typeof define.amd?define(n,function(){return r(e)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=r(e):e[n]=r(e)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,"PEGUtil",function(){var e={};e.makeAST=function(e,n){return function(){return n.util.__makeAST.call(null,e().start.line,e().start.column,e().start.offset,arguments)}},e.makeUnroll=function(e,n){return function(r,t,o){if("object"!=typeof t||!(t instanceof Array))throw new n.util.__SyntaxError("unroll: invalid list argument for unrolling",typeof t,"Array",e());if("undefined"!=typeof o){"number"==typeof o&&(o=[o]);var a=[];null!==r&&a.push(r);for(var l=0;l<t.length;l++)for(var u=0;u<o.length;u++)a.push(t[l][o[u]]);return a}return null!==r&&t.unshift(r),t}};var n=function(e,n){var r=e.length,t=n-20;t<0&&(t=0);var o=n+20;o>r&&(o=r);var a=function(e){return e.charCodeAt(0).toString(16).toUpperCase()},l=function(e,n,r){return e.substr(n,r).replace(/\\/g,"\\\\").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+a(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+a(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+a(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+a(e)})};return{prolog:l(e,t,n-t),token:l(e,n,1),epilog:l(e,n+1,o-(n+1))}};return e.parse=function(r,t,o){if("object"!=typeof r)throw new Error("invalid parser object (not an object)");if("function"!=typeof r.parse)throw new Error('invalid parser object (no "parse" function)');if("string"!=typeof t)throw new Error("invalid input text (not a string)");if("undefined"!=typeof o&&"object"!=typeof o)throw new Error("invalid options (not an object)");"undefined"==typeof o&&(o={});var a={ast:null,error:null};try{var l;l="function"==typeof o.makeAST?o.makeAST:function(e,n){return{line:e().start.line,column:e().start.column,offset:e().start.offset,args:n}},o.util={makeUnroll:e.makeUnroll,makeAST:e.makeAST,__makeAST:l,__SyntaxError:r.SyntaxError},a.ast=r.parse(t,o),a.error=null}catch(e){if(a.ast=null,e instanceof r.SyntaxError){var u=function(e,n){return"undefined"!=typeof e?e:n};a.error={line:u(e.location.start.line,0),column:u(e.location.start.column,0),message:e.message,found:u(e.found,""),expected:u(e.expected,""),location:n(t,u(e.location.start.offset,0))}}else a.error={line:0,column:0,message:e.message,found:"",expected:"",location:n("",0)}}return a},e.errorMessage=function(e,n){for(var r=e.location,t="line "+e.line+" (column "+e.column+"): ",o="",a=0;a<t.length+r.prolog.length;a++)o+="-";var l=t+r.prolog+r.token+r.epilog+"\n"+o+"^\n"+e.message+(n?"":"\n");return l},e});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],4:[function(_dereq_,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),ASTQAdapterASTY=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"taste",value:function(e){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&null!==e&&"boolean"==typeof e.ASTy}},{key:"getParentNode",value:function(e){return e.parent()}},{key:"getChildNodes",value:function(e){return e.childs()}},{key:"getNodeType",value:function(e){return e.type()}},{key:"getNodeAttrNames",value:function(e){return e.attrs()}},{key:"getNodeAttrValue",value:function(e,t){return e.get(t)}}]),e}();exports.default=ASTQAdapterASTY;
},{}],5:[function(_dereq_,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),ASTQAdapterMozAST=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"taste",value:function(e){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&null!==e&&"string"==typeof e.type&&""!==e.type}},{key:"getParentNode",value:function(e,t){if("*"!==t&&"parent"!==t)throw new Error('no such axis named "'+t+'" for walking to parent nodes');if("undefined"!=typeof e.parent)return e.parent;throw new Error("Your Mozilla SpiderMonkey AST does not support parent node traversal")}},{key:"getChildNodes",value:function(e,t){var n=this,o=[],r=function(e,t){e.hasOwnProperty(t)&&n.taste(e[t])?o.push(e[t]):e.hasOwnProperty(t)&&"object"===_typeof(e[t])&&e[t]instanceof Array&&e[t].forEach(function(e){n.taste(e)&&o.push(e)})};if("*"===t)for(var a in e)r(e,a);else{if("undefined"==typeof e[t])throw new Error('no such axis named "'+t+'" for walking to child nodes');r(e,t)}return o}},{key:"getNodeType",value:function(e){return e.type}},{key:"getNodeAttrNames",value:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&"object"!==_typeof(e[n])&&"type"!==n&&"loc"!==n&&t.push(n);return t}},{key:"getNodeAttrValue",value:function(e,t){return e.hasOwnProperty(t)&&"object"!==_typeof(e[t])&&"type"!==t&&"loc"!==t?e[t]:void 0}}]),e}();exports.default=ASTQAdapterMozAST;
},{}],6:[function(_dereq_,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),ASTQAdapterParse5=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"taste",value:function(e){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&null!==e&&!("object"===("undefined"==typeof Node?"undefined":_typeof(Node))&&e instanceof Node)&&"string"==typeof e.nodeName&&""!==e.nodeName}},{key:"getParentNode",value:function(e){return e.parentNode}},{key:"getChildNodes",value:function(e){return"object"===_typeof(e.childNodes)&&e.childNodes instanceof Array?e.childNodes:[]}},{key:"getNodeType",value:function(e){return e.nodeName}},{key:"getNodeAttrNames",value:function(e){var t=["value"];return"object"===_typeof(e.attrs)&&e.attrs instanceof Array&&(t=t.concat(e.attrs.map(function(e){return e.name}))),t}},{key:"getNodeAttrValue",value:function(e,t){var n=void 0;if("value"===t)n=e.value;else if("object"===_typeof(e.attrs)&&e.attrs instanceof Array){var o=e.attrs.filter(function(e){return e.name===t}).map(function(e){return e.value});1===o.length&&(n=o[0])}return n}}]),e}();exports.default=ASTQAdapterParse5;
},{}],7:[function(_dereq_,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),ASTQAdapterXMLDOM=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"taste",value:function(e){return"object"===("undefined"==typeof Node?"undefined":_typeof(Node))&&null!==e&&e instanceof Node&&"object"===("undefined"==typeof e?"undefined":_typeof(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}},{key:"getParentNode",value:function(e){return e.parentNode}},{key:"getChildNodes",value:function(e){return"object"===_typeof(e.childNodes)&&null!==e.childNodes&&e.hasChildNodes()?Array.prototype.slice.call(e.childNodes,0):[]}},{key:"getNodeType",value:function(e){return"string"==typeof e.nodeName?e.nodeName:"unknown"}},{key:"getNodeAttrNames",value:function(e){return"object"===_typeof(e.attributes)&&null!==e.attributes&&e.hasAttributes()?Array.prototype.slice.call(e.attributes,0).map(function(e){return e.nodeName}):[]}},{key:"getNodeAttrValue",value:function(e,t){return"object"===_typeof(e.attributes)&&null!==e.attributes&&e.hasAttributes()?e.getAttribute(t):void 0}}]),e}();exports.default=ASTQAdapterXMLDOM;
},{}],8:[function(_dereq_,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),ASTQAdapter=function(){function e(){return _classCallCheck(this,e),this._adapters=[],this}return _createClass(e,[{key:"register",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._adapters.unshift({adapter:e,force:t}),this}},{key:"unregister",value:function(e){if(void 0===e)this._adapters=[];else{for(var t=[],a=0;a<this._adapters.length;a++)this._adapters[a].adapter!==e&&t.push(this._adapters[a]);this._adapters=t}return this}},{key:"select",value:function(e){for(var t=0;t<this._adapters.length;t++)if(this._adapters[t].force||this._adapters[t].adapter.taste(e))return this._adapters[t].adapter}}]),e}();exports.default=ASTQAdapter;
},{}],9:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_pos=function(t,n){var e=t.getParentNode(n,"*");if(null===e)return 1;for(var r=t.getChildNodes(e,"*"),o=0;o<r.length;o++)if(r[o]===n)return o+1;throw new Error("cannot find myself")},parents=function t(n,e){for(var t=[];null!==(e=n.getParentNode(e,"*"));)t.push(e);return t},stdfuncs={type:function(t,n){return t.getNodeType(n)},attrs:function(t,n,e){return void 0===e&&(e=" "),e+t.getNodeAttrNames(n).join(e)+e},depth:function t(n,e){for(var t=1,r=e;null!==(r=n.getParentNode(r,"*"));)t++;return t},pos:function(t,n){return _pos(t,n)},nth:function(t,n,e){e=parseInt(e,10);var r=t.getParentNode(n,"*");if(null!==r){var o=t.getChildNodes(r,"*");e<0&&(e=o.length-(e+1));for(var u=0;u<o.length;u++)if(o[u]===n)return u+1===e;return!1}return 1===e},first:function(t,n){return stdfuncs.nth(t,n,1)},last:function(t,n){return stdfuncs.nth(t,n,-1)},count:function(t,n,e){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&e instanceof Array?e.length:"object"===("undefined"==typeof e?"undefined":_typeof(e))?Object.keys(e).length:"string"==typeof e?e.length:String(e).length},below:function(t,n,e){if(!t.taste(e))throw new Error('invalid argument to function "below" (node expected)');for(var r=n;null!==(r=t.getParentNode(r,"*"));)if(r===e)return!0;return!1},follows:function(t,n,e){if(!t.taste(e))throw new Error('invalid argument to function "follows" (node expected)');if(n===e)return!1;var r=[n].concat(parents(t,n)).reverse(),o=[e].concat(parents(t,e)).reverse(),u=Math.min(r.length,o.length),f=void 0;for(f=0;f<u&&r[f]===o[f];f++);if(0===f)throw new Error("internal error: root nodes have to be same same");return f===u?o.length<r.length:_pos(t,r[f])>_pos(t,o[f])},in:function(t,n,e){if(!("object"===("undefined"==typeof e?"undefined":_typeof(e))&&e instanceof Array))throw new Error('invalid argument to function "in" (array expected)');for(var r=0;r<e.length;r++)if(e[r]===n)return!0;return!1},substr:function(t,n,e,r,o){return String(e).substr(r,o)},index:function(t,n,e,r,o){return String(e).indexOf(r,o)},trim:function(t,n,e){return String(e).trim()},lc:function(t,n,e){return String(e).toLowerCase()},uc:function(t,n,e){return String(e).toUpperCase()}};exports.default=stdfuncs;
},{}],10:[function(_dereq_,module,exports){
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),ASTQFuncs=function(){function e(){return _classCallCheck(this,e),this._funcs={},this}return _createClass(e,[{key:"register",value:function(e,n){this._funcs[e]=n}},{key:"run",value:function(e,n){var t=this._funcs[e];if("function"!=typeof t)throw new Error('invalid function "'+e+'"');return t.apply(null,n)}}]),e}();exports.default=ASTQFuncs;
},{}],11:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_astqUtil=_dereq_("./astq-util.js"),_astqUtil2=_interopRequireDefault(_astqUtil),_astqQueryTrace=_dereq_("./astq-query-trace.js"),_astqQueryTrace2=_interopRequireDefault(_astqQueryTrace),ASTQQueryExec=function(e){function t(e,r,a,i){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.adapter=e,n.params=r,n.funcs=a,n.trace=i,n}return _inherits(t,e),_createClass(t,[{key:"execQuery",value:function(e,t){var r=this;this.traceBegin(e,t);var a=[];return e.childs().forEach(function(e){a=a.concat(r.execPath(e,t))}),this.traceEnd(e,t,a),a}},{key:"execPath",value:function(e,t){var r=this;this.traceBegin(e,t);var a=[t],i=[],n=!1;return e.childs().forEach(function(e){var t=[];a.forEach(function(a){t=t.concat(r.execStep(e,a))}),a=t,e.get("isResult")&&(n=!0,i=i.concat(a))}),this.traceEnd(e,t,a),n?i:a}},{key:"execStep",value:function(e,t){var r=this;this.traceBegin(e,t);var a=e.childs(),i=null,n=null,c=null,l=0;if(l<a.length&&"Axis"===a[l].type()&&(i=a[l++]),l<a.length&&"Match"===a[l].type()&&(n=a[l++]),l<a.length&&"Filter"===a[l].type()&&(c=a[l++]),null===n)throw new Error("no matching part in query step");var s=[],u=n.get("id"),o=function(e){var t=r.adapter.getNodeType(e);if("*"===u||u===t){var a=!0;null!==c&&(r.execFilter(c,e)||(a=!1)),a&&s.push(e)}};return null!==i?!function(){var e=i.get("op"),a=i.get("type");if("/"===e)r.adapter.getChildNodes(t,a).forEach(function(e){return o(e)});else if("//"===e)!function(){var e=function e(t){o(t),r.adapter.getChildNodes(t,a).forEach(function(t){return e(t)})};r.adapter.getChildNodes(t,a).forEach(function(t){return e(t)})}();else if("-/"===e){var n=r.adapter.getParentNode(t,"*");if(null!==n){for(var c=r.adapter.getChildNodes(n,a),l=null,u=0;u<c.length&&c[u]!==t;u++)l=c[u];null!==l&&o(l)}}else if("-//"===e){var h=r.adapter.getParentNode(t,"*");if(null!==h){for(var d=r.adapter.getChildNodes(h,a),f=0;f<d.length&&d[f]!==t;f++);for(f--;f>=0;f--)o(d[f])}}else if("+/"===e){var p=r.adapter.getParentNode(t,"*");if(null!==p){var x=r.adapter.getChildNodes(p,a),E=void 0;for(E=0;E<x.length&&x[E]!==t;E++);E<x.length&&o(x[++E])}}else if("+//"===e){var v=r.adapter.getParentNode(t,"*");if(null!==v){var g=r.adapter.getChildNodes(v,a),b=void 0;for(b=0;b<g.length&&g[b]!==t;b++);if(b<g.length)for(b++;b<g.length;b++)o(g[b])}}else if("../"===e){var y=r.adapter.getParentNode(t,a);null!==y&&o(y)}else if("..//"===e)for(var _=t;;){var q=r.adapter.getParentNode(_,a);if(null===q)break;o(q),_=q}else"<//"===e?!function(){for(var e={sentinel:t,take:!0};;){var i=r.adapter.getParentNode(t,"*");if(null===i)break;t=i}var n=function t(i){i===e.sentinel&&(e.take=!1),e.take&&o(i),e.take&&r.adapter.getChildNodes(i,a).forEach(function(e){return t(e)})};t!==e.sentinel&&(o(t),r.adapter.getChildNodes(t,a).forEach(function(e){return n(e)})),s=s.reverse()}():">//"===e&&!function(){for(var e={sentinel:t,take:!1};;){var i=r.adapter.getParentNode(t,"*");if(null===i)break;t=i}var n=function t(i){e.take&&o(i),i===e.sentinel&&(e.take=!0),r.adapter.getChildNodes(i,a).forEach(function(e){return t(e)})};r.adapter.getChildNodes(t,a).forEach(function(e){return n(e)})}()}():o(t),this.traceEnd(e,t,s),s}},{key:"execFilter",value:function(e,t){this.traceBegin(e,t);var r=e.childs()[0],a=this.execExpr(r,t);return a=_astqUtil2.default.truthy(a),this.traceEnd(e,t,a),a}},{key:"execExpr",value:function(e,t){switch(e.type()){case"ConditionalBinary":return this.execExprConditionalBinary(e,t);case"ConditionalTernary":return this.execExprConditionalTernary(e,t);case"Logical":return this.execExprLogical(e,t);case"Bitwise":return this.execExprBitwise(e,t);case"Relational":return this.execExprRelational(e,t);case"Arithmetical":return this.execExprArithmetical(e,t);case"Unary":return this.execExprUnary(e,t);case"FuncCall":return this.execExprFuncCall(e,t);case"Attribute":return this.execExprAttribute(e,t);case"Param":return this.execExprParam(e,t);case"LiteralString":return this.execExprLiteralString(e,t);case"LiteralRegExp":return this.execExprLiteralRegExp(e,t);case"LiteralNumber":return this.execExprLiteralNumber(e,t);case"LiteralValue":return this.execExprLiteralValue(e,t);case"Path":return this.execExprPath(e,t)}}},{key:"execExprConditionalBinary",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t);return _astqUtil2.default.truthy(r)||(r=this.execExpr(e.childs()[1],t)),this.traceEnd(e,t,r),r}},{key:"execExprConditionalTernary",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t);return r=_astqUtil2.default.truthy(r)?this.execExpr(e.childs()[1],t):this.execExpr(e.childs()[2],t),this.traceEnd(e,t,r),r}},{key:"execExprLogical",value:function(e,t){this.traceBegin(e,t);var r=!1;switch(e.get("op")){case"&&":r=_astqUtil2.default.truthy(this.execExpr(e.childs()[0],t)),r&&(r=r&&_astqUtil2.default.truthy(this.execExpr(e.childs()[1],t)));break;case"||":r=_astqUtil2.default.truthy(this.execExpr(e.childs()[0],t)),r||(r=r||_astqUtil2.default.truthy(this.execExpr(e.childs()[1],t)))}return this.traceEnd(e,t,r),r}},{key:"execExprBitwise",value:function(e,t){this.traceBegin(e,t);var r=_astqUtil2.default.coerce(this.execExpr(e.childs()[0],t),"number"),a=_astqUtil2.default.coerce(this.execExpr(e.childs()[1],t),"number"),i=void 0;switch(e.get("op")){case"&":i=r&a;break;case"|":i=r|a;break;case"<<":i=r<<a;break;case">>":i=r>>a}return this.traceEnd(e,t,i),i}},{key:"execExprRelational",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t),a=this.execExpr(e.childs()[1],t),i=void 0;switch(e.get("op")){case"==":i=r===a;break;case"!=":i=r!==a;break;case"<=":i=_astqUtil2.default.coerce(r,"number")<=_astqUtil2.default.coerce(a,"number");break;case">=":i=_astqUtil2.default.coerce(r,"number")>=_astqUtil2.default.coerce(a,"number");break;case"<":i=_astqUtil2.default.coerce(r,"number")<_astqUtil2.default.coerce(a,"number");break;case">":i=_astqUtil2.default.coerce(r,"number")>_astqUtil2.default.coerce(a,"number");break;case"=~":i=null!==_astqUtil2.default.coerce(r,"string").match(_astqUtil2.default.coerce(a,"regexp"));break;case"!~":i=null===_astqUtil2.default.coerce(r,"string").match(_astqUtil2.default.coerce(a,"regexp"))}return this.traceEnd(e,t,i),i}},{key:"execExprArithmetical",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t),a=this.execExpr(e.childs()[1],t),i=void 0;switch(e.get("op")){case"+":i="string"==typeof r?r+_astqUtil2.default.coerce(a,"string"):_astqUtil2.default.coerce(r,"number")+_astqUtil2.default.coerce(a,"number");break;case"-":i=_astqUtil2.default.coerce(r,"number")+_astqUtil2.default.coerce(a,"number");break;case"*":i=_astqUtil2.default.coerce(r,"number")*_astqUtil2.default.coerce(a,"number");break;case"/":i=_astqUtil2.default.coerce(r,"number")/_astqUtil2.default.coerce(a,"number");break;case"%":i=_astqUtil2.default.coerce(r,"number")%_astqUtil2.default.coerce(a,"number");break;case"**":i=Math.pow(_astqUtil2.default.coerce(r,"number"),_astqUtil2.default.coerce(a,"number"))}return this.traceEnd(e,t,i),i}},{key:"execExprUnary",value:function(e,t){this.traceBegin(e,t);var r=this.execExpr(e.childs()[0],t),a=void 0;switch(e.get("op")){case"!":a=!_astqUtil2.default.coerce(r,"boolean");break;case"~":a=~_astqUtil2.default.coerce(r,"number")}return this.traceEnd(e,t,a),a}},{key:"execExprFuncCall",value:function(e,t){var r=this;this.traceBegin(e,t);var a=e.get("id"),i=[this.adapter,t];e.childs().forEach(function(e){i.push(r.execExpr(e,t))});var n=this.funcs.run(a,i);return this.traceEnd(e,t,n),n}},{key:"execExprAttribute",value:function(e,t){this.traceBegin(e,t);var r=e.get("id"),a=this.adapter.getNodeAttrValue(t,r);return this.traceEnd(e,t,a),a}},{key:"execExprParam",value:function(e,t){this.traceBegin(e,t);var r=e.get("id");if("undefined"==typeof this.params[r])throw new Error('invalid parameter "'+r+'"');var a=this.params[r];return this.traceEnd(e,t,a),a}},{key:"execExprLiteralString",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprLiteralRegExp",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprLiteralNumber",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprLiteralValue",value:function(e,t){this.traceBegin(e,t);var r=e.get("value");return this.traceEnd(e,t,r),r}},{key:"execExprPath",value:function(e,t){this.traceBegin(e,t);var r=this.execPath(e,t);return this.traceEnd(e,t,r),r}}]),t}(_astqQueryTrace2.default);exports.default=ASTQQueryExec;
},{"./astq-query-trace.js":12,"./astq-util.js":14}],12:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_astqUtil=_dereq_("./astq-util.js"),_astqUtil2=_interopRequireDefault(_astqUtil),ASTQQueryTrace=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"prefixOf",value:function(e,t){for(var r=0,n=e;null!==(n=n.parent());)r++;var a=_astqUtil2.default.pad("",4*r);for(r=0,n=t;null!==(n=this.adapter.getParentNode(n,"*"));)r++;var o=_astqUtil2.default.pad("",4*r);return{prefix1:a,prefix2:o}}},{key:"traceBegin",value:function(e,t){if(this.trace){var r=this.prefixOf(e,t),n=r.prefix1,a=r.prefix2;console.log("ASTQ: execute: | "+_astqUtil2.default.pad(n+e.type()+" (",-60)+" | "+a+this.adapter.getNodeType(t))}}},{key:"traceEnd",value:function(e,t,r){var n=this;if(this.trace){var a=this.prefixOf(e,t),o=a.prefix1,i=a.prefix2,f=void 0;void 0===r?f="undefined":"object"===("undefined"==typeof r?"undefined":_typeof(r))&&r instanceof Array?(f="[",r.forEach(function(e){f+="node("+n.adapter.getNodeType(e)+"),"}),f=f.replace(/,$/,"")+"]"):f=("undefined"==typeof r?"undefined":_typeof(r))+"("+r+")",f.length>60&&(f=f.substr(0,60)+"..."),console.log("ASTQ: execute: | "+_astqUtil2.default.pad(o+"): "+f,-60)+" | "+i+this.adapter.getNodeType(t))}}}]),e}();exports.default=ASTQQueryTrace;
},{"./astq-util.js":14}],13:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function t(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}}(),_astqQueryExec=_dereq_("./astq-query-exec.js"),_astqQueryExec2=_interopRequireDefault(_astqQueryExec),ASTY=_dereq_("asty"),PEGUtil=_dereq_("pegjs-util"),ASTQQueryParse=function(){function t(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function r(t,e,n,u){this.message=t,this.expected=e,this.found=n,this.location=u,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}function e(t,e){function n(){return f(xu,pu)}function u(t,r){throw r=void 0!==r?r:f(xu,pu),A(t,r)}function s(t,r){return{type:"literal",text:t,ignoreCase:r}}function a(t,r,e){return{type:"class",parts:t,inverted:r,ignoreCase:e}}function o(){return{type:"any"}}function c(){return{type:"end"}}function i(t){return{type:"other",description:t}}function l(r){var e,n=bu[r];if(n)return n;for(e=r-1;!bu[e];)e--;for(n=bu[e],n={line:n.line,column:n.column};e<r;)10===t.charCodeAt(e)?(n.line++,n.column=1):n.column++,e++;return bu[r]=n,n}function f(t,r){var e=l(t),n=l(r);return{start:{offset:t,line:e.line,column:e.column},end:{offset:r,line:n.line,column:n.column}}}function h(t){pu<gu||(pu>gu&&(gu=pu,vu=[]),vu.push(t))}function A(t,e){return new r(t,null,null,e)}function d(t,e,n){return new r(r.buildMessage(t,e),t,e,n)}function p(){var t,r,e,n,u,s=38*pu+0,a=Cu[s];return a?(pu=a.nextPos,a.result):(t=pu,r=H(),r!==tt?(e=x(),e!==tt?(n=H(),n!==tt?(u=W(),u!==tt?(xu=t,r=nt(e),t=r):(pu=t,t=tt)):(pu=t,t=tt)):(pu=t,t=tt)):(pu=t,t=tt),Cu[s]={nextPos:pu,result:t},t)}function x(){var r,e,n,u,s,a,o,c,i=38*pu+1,l=Cu[i];if(l)return pu=l.nextPos,l.result;if(r=pu,e=b(),e!==tt){for(n=[],u=pu,s=H(),s!==tt?(44===t.charCodeAt(pu)?(a=ut,pu++):(a=tt,0===Pu&&h(st)),a!==tt?(o=H(),o!==tt?(c=b(),c!==tt?(s=[s,a,o,c],u=s):(pu=u,u=tt)):(pu=u,u=tt)):(pu=u,u=tt)):(pu=u,u=tt);u!==tt;)n.push(u),u=pu,s=H(),s!==tt?(44===t.charCodeAt(pu)?(a=ut,pu++):(a=tt,0===Pu&&h(st)),a!==tt?(o=H(),o!==tt?(c=b(),c!==tt?(s=[s,a,o,c],u=s):(pu=u,u=tt)):(pu=u,u=tt)):(pu=u,u=tt)):(pu=u,u=tt);n!==tt?(xu=r,e=at(e,n),r=e):(pu=r,r=tt)}else pu=r,r=tt;return Cu[i]={nextPos:pu,result:r},r}function b(){var t,r,e,n,u,s,a=38*pu+2,o=Cu[a];if(o)return pu=o.nextPos,o.result;if(t=pu,r=g(),r!==tt){for(e=[],n=pu,u=H(),u!==tt?(s=v(),s!==tt?(u=[u,s],n=u):(pu=n,n=tt)):(pu=n,n=tt);n!==tt;)e.push(n),n=pu,u=H(),u!==tt?(s=v(),s!==tt?(u=[u,s],n=u):(pu=n,n=tt)):(pu=n,n=tt);e!==tt?(xu=t,r=ot(r,e),t=r):(pu=t,t=tt)}else pu=t,t=tt;return Cu[a]={nextPos:pu,result:t},t}function g(){var r,e,n,u,s,a,o,c,i=38*pu+3,l=Cu[i];return l?(pu=l.nextPos,l.result):(r=pu,e=P(),e===tt&&(e=null),e!==tt?(n=H(),n!==tt?(u=y(),u!==tt?(s=H(),s!==tt?(33===t.charCodeAt(pu)?(a=ct,pu++):(a=tt,0===Pu&&h(it)),a===tt&&(a=null),a!==tt?(o=H(),o!==tt?(c=m(),c===tt&&(c=null),c!==tt?(xu=r,e=lt(e,u,a,c),r=e):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt),Cu[i]={nextPos:pu,result:r},r)}function v(){var r,e,n,u,s,a,o,c,i=38*pu+4,l=Cu[i];return l?(pu=l.nextPos,l.result):(r=pu,e=P(),e!==tt?(n=H(),n!==tt?(u=y(),u!==tt?(s=H(),s!==tt?(33===t.charCodeAt(pu)?(a=ct,pu++):(a=tt,0===Pu&&h(it)),a===tt&&(a=null),a!==tt?(o=H(),o!==tt?(c=m(),c===tt&&(c=null),c!==tt?(xu=r,e=lt(e,u,a,c),r=e):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt),Cu[i]={nextPos:pu,result:r},r)}function P(){var r,e,n,u=38*pu+5,s=Cu[u];return s?(pu=s.nextPos,s.result):(Pu++,r=pu,e=pu,t.substr(pu,2)===ht?(n=ht,pu+=2):(n=tt,0===Pu&&h(At)),n===tt&&(47===t.charCodeAt(pu)?(n=dt,pu++):(n=tt,0===Pu&&h(pt)),n===tt&&(t.substr(pu,3)===xt?(n=xt,pu+=3):(n=tt,0===Pu&&h(bt)),n===tt&&(t.substr(pu,2)===gt?(n=gt,pu+=2):(n=tt,0===Pu&&h(vt)),n===tt&&(t.substr(pu,3)===Pt?(n=Pt,pu+=3):(n=tt,0===Pu&&h(Ct)),n===tt&&(t.substr(pu,2)===yt?(n=yt,pu+=2):(n=tt,0===Pu&&h(mt)),n===tt&&(t.substr(pu,4)===St?(n=St,pu+=4):(n=tt,0===Pu&&h(Et)),n===tt&&(t.substr(pu,3)===Qt?(n=Qt,pu+=3):(n=tt,0===Pu&&h(wt)),n===tt&&(t.substr(pu,3)===qt?(n=qt,pu+=3):(n=tt,0===Pu&&h(Tt)),n===tt&&(t.substr(pu,3)===_t?(n=_t,pu+=3):(n=tt,0===Pu&&h(Rt))))))))))),e=n!==tt?t.substring(e,pu):n,e!==tt?(n=C(),n===tt&&(n=null),n!==tt?(xu=r,e=Ft(e,n),r=e):(pu=r,r=tt)):(pu=r,r=tt),Pu--,r===tt&&(e=tt,0===Pu&&h(ft)),Cu[u]={nextPos:pu,result:r},r)}function C(){var r,e,n,u=38*pu+6,s=Cu[u];return s?(pu=s.nextPos,s.result):(r=pu,58===t.charCodeAt(pu)?(e=Lt,pu++):(e=tt,0===Pu&&h(kt)),e!==tt?(n=Z(),n!==tt?(xu=r,e=Nt(n),r=e):(pu=r,r=tt)):(pu=r,r=tt),r===tt&&(r=pu,58===t.charCodeAt(pu)?(e=Lt,pu++):(e=tt,0===Pu&&h(kt)),e!==tt?(n=G(),n!==tt?(xu=r,e=Mt(n),r=e):(pu=r,r=tt)):(pu=r,r=tt)),Cu[u]={nextPos:pu,result:r},r)}function y(){var r,e,n=38*pu+7,u=Cu[n];return u?(pu=u.nextPos,u.result):(r=pu,e=Z(),e!==tt&&(xu=r,e=jt(e)),r=e,r===tt&&(r=pu,e=G(),e!==tt&&(xu=r,e=It(e)),r=e,r===tt&&(r=pu,42===t.charCodeAt(pu)?(e=Ut,pu++):(e=tt,0===Pu&&h(Vt)),e!==tt&&(xu=r,e=zt()),r=e)),Cu[n]={nextPos:pu,result:r},r)}function m(){var r,e,n,u,s,a,o=38*pu+8,c=Cu[o];return c?(pu=c.nextPos,c.result):(r=pu,91===t.charCodeAt(pu)?(e=Zt,pu++):(e=tt,0===Pu&&h(Gt)),e!==tt?(n=H(),n!==tt?(u=S(),u!==tt?(s=H(),s!==tt?(93===t.charCodeAt(pu)?(a=Ot,pu++):(a=tt,0===Pu&&h(Bt)),a!==tt?(xu=r,e=Dt(u),r=e):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt),Cu[o]={nextPos:pu,result:r},r)}function S(){var r,e,n,u,s,a,o,c,i,l,f=38*pu+9,A=Cu[f];return A?(pu=A.nextPos,A.result):(r=pu,e=E(),e!==tt?(n=H(),n!==tt?(t.substr(pu,2)===Yt?(u=Yt,pu+=2):(u=tt,0===Pu&&h($t)),u!==tt?(s=H(),s!==tt?(a=E(),a!==tt?(xu=r,e=Ht(e,a),r=e):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt),r===tt&&(r=pu,e=E(),e!==tt?(n=H(),n!==tt?(63===t.charCodeAt(pu)?(u=Jt,pu++):(u=tt,0===Pu&&h(Kt)),u!==tt?(s=H(),s!==tt?(a=E(),a!==tt?(o=H(),o!==tt?(58===t.charCodeAt(pu)?(c=Lt,pu++):(c=tt,0===Pu&&h(kt)),c!==tt?(i=H(),i!==tt?(l=E(),l!==tt?(xu=r,e=Wt(e,a,l),r=e):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt),r===tt&&(r=E())),Cu[f]={nextPos:pu,result:r},r)}function E(){var r,e,n,u,s,a,o=38*pu+10,c=Cu[o];return c?(pu=c.nextPos,c.result):(r=pu,e=Q(),e!==tt?(n=H(),n!==tt?(u=pu,t.substr(pu,2)===Xt?(s=Xt,pu+=2):(s=tt,0===Pu&&h(tr)),u=s!==tt?t.substring(u,pu):s,u!==tt?(s=H(),s!==tt?(a=E(),a!==tt?(xu=r,e=rr(e,u,a),r=e):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt),r===tt&&(r=Q()),Cu[o]={nextPos:pu,result:r},r)}function Q(){var r,e,n,u,s,a,o=38*pu+11,c=Cu[o];return c?(pu=c.nextPos,c.result):(r=pu,e=w(),e!==tt?(n=H(),n!==tt?(u=pu,t.substr(pu,2)===er?(s=er,pu+=2):(s=tt,0===Pu&&h(nr)),u=s!==tt?t.substring(u,pu):s,u!==tt?(s=H(),s!==tt?(a=Q(),a!==tt?(xu=r,e=rr(e,u,a),r=e):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt),r===tt&&(r=w()),Cu[o]={nextPos:pu,result:r},r)}function w(){var r,e,n,u,s,a,o=38*pu+12,c=Cu[o];return c?(pu=c.nextPos,c.result):(r=pu,e=q(),e!==tt?(n=H(),n!==tt?(u=pu,124===t.charCodeAt(pu)?(s=ur,pu++):(s=tt,0===Pu&&h(sr)),u=s!==tt?t.substring(u,pu):s,u!==tt?(s=H(),s!==tt?(a=w(),a!==tt?(xu=r,e=ar(e,u,a),r=e):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt),r===tt&&(r=q()),Cu[o]={nextPos:pu,result:r},r)}function q(){var r,e,n,u,s,a,o=38*pu+13,c=Cu[o];return c?(pu=c.nextPos,c.result):(r=pu,e=T(),e!==tt?(n=H(),n!==tt?(u=pu,94===t.charCodeAt(pu)?(s=or,pu++):(s=tt,0===Pu&&h(cr)),u=s!==tt?t.substring(u,pu):s,u!==tt?(s=H(),s!==tt?(a=q(),a!==tt?(xu=r,e=ar(e,u,a),r=e):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt),r===tt&&(r=T()),Cu[o]={nextPos:pu,result:r},r)}function T(){var r,e,n,u,s,a,o=38*pu+14,c=Cu[o];return c?(pu=c.nextPos,c.result):(r=pu,e=_(),e!==tt?(n=H(),n!==tt?(u=pu,38===t.charCodeAt(pu)?(s=ir,pu++):(s=tt,0===Pu&&h(lr)),u=s!==tt?t.substring(u,pu):s,u!==tt?(s=H(),s!==tt?(a=T(),a!==tt?(xu=r,e=ar(e,u,a),r=e):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt),r===tt&&(r=_()),Cu[o]={nextPos:pu,result:r},r)}function _(){var r,e,n,u,s,a,o=38*pu+15,c=Cu[o];return c?(pu=c.nextPos,c.result):(r=pu,e=R(),e!==tt?(n=H(),n!==tt?(u=pu,t.substr(pu,2)===fr?(s=fr,pu+=2):(s=tt,0===Pu&&h(hr)),s===tt&&(t.substr(pu,2)===Ar?(s=Ar,pu+=2):(s=tt,0===Pu&&h(dr)),s===tt&&(t.substr(pu,2)===pr?(s=pr,pu+=2):(s=tt,0===Pu&&h(xr)),s===tt&&(t.substr(pu,2)===br?(s=br,pu+=2):(s=tt,0===Pu&&h(gr)),s===tt&&(60===t.charCodeAt(pu)?(s=vr,pu++):(s=tt,0===Pu&&h(Pr)),s===tt&&(62===t.charCodeAt(pu)?(s=Cr,pu++):(s=tt,0===Pu&&h(yr)),s===tt&&(t.substr(pu,2)===mr?(s=mr,pu+=2):(s=tt,0===Pu&&h(Sr)),s===tt&&(t.substr(pu,2)===Er?(s=Er,pu+=2):(s=tt,0===Pu&&h(Qr))))))))),u=s!==tt?t.substring(u,pu):s,u!==tt?(s=H(),s!==tt?(a=_(),a!==tt?(xu=r,e=wr(e,u,a),r=e):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt),r===tt&&(r=R()),Cu[o]={nextPos:pu,result:r},r)}function R(){var r,e,n,u,s,a,o=38*pu+16,c=Cu[o];return c?(pu=c.nextPos,c.result):(r=pu,e=F(),e!==tt?(n=H(),n!==tt?(u=pu,t.substr(pu,2)===qr?(s=qr,pu+=2):(s=tt,0===Pu&&h(Tr)),s===tt&&(t.substr(pu,2)===_r?(s=_r,pu+=2):(s=tt,0===Pu&&h(Rr))),u=s!==tt?t.substring(u,pu):s,u!==tt?(s=H(),s!==tt?(a=R(),a!==tt?(xu=r,e=ar(e,u,a),r=e):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt),r===tt&&(r=F()),Cu[o]={nextPos:pu,result:r},r)}function F(){var r,e,n,u,s,a,o=38*pu+17,c=Cu[o];return c?(pu=c.nextPos,c.result):(r=pu,e=L(),e!==tt?(n=H(),n!==tt?(u=pu,43===t.charCodeAt(pu)?(s=Fr,pu++):(s=tt,0===Pu&&h(Lr)),s===tt&&(45===t.charCodeAt(pu)?(s=kr,pu++):(s=tt,0===Pu&&h(Nr))),u=s!==tt?t.substring(u,pu):s,u!==tt?(s=H(),s!==tt?(a=F(),a!==tt?(xu=r,e=Mr(e,u,a),r=e):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt),r===tt&&(r=L()),Cu[o]={nextPos:pu,result:r},r)}function L(){var r,e,n,u,s,a,o=38*pu+18,c=Cu[o];return c?(pu=c.nextPos,c.result):(r=pu,e=k(),e!==tt?(n=H(),n!==tt?(u=pu,t.substr(pu,2)===jr?(s=jr,pu+=2):(s=tt,0===Pu&&h(Ir)),s===tt&&(42===t.charCodeAt(pu)?(s=Ut,pu++):(s=tt,0===Pu&&h(Vt)),s===tt&&(47===t.charCodeAt(pu)?(s=dt,pu++):(s=tt,0===Pu&&h(pt)),s===tt&&(37===t.charCodeAt(pu)?(s=Ur,pu++):(s=tt,0===Pu&&h(Vr))))),u=s!==tt?t.substring(u,pu):s,u!==tt?(s=H(),s!==tt?(a=L(),a!==tt?(xu=r,e=Mr(e,u,a),r=e):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt),r===tt&&(r=k()),Cu[o]={nextPos:pu,result:r},r)}function k(){var r,e,n,u=38*pu+19,s=Cu[u];return s?(pu=s.nextPos,s.result):(r=pu,e=pu,33===t.charCodeAt(pu)?(n=ct,pu++):(n=tt,0===Pu&&h(it)),n===tt&&(126===t.charCodeAt(pu)?(n=zr,pu++):(n=tt,0===Pu&&h(Zr))),e=n!==tt?t.substring(e,pu):n,e!==tt?(n=N(),n!==tt?(xu=r,e=Gr(e,n),r=e):(pu=r,r=tt)):(pu=r,r=tt),r===tt&&(r=N()),Cu[u]={nextPos:pu,result:r},r)}function N(){var t,r=38*pu+20,e=Cu[r];return e?(pu=e.nextPos,e.result):(t=M(),t===tt&&(t=I(),t===tt&&(t=U(),t===tt&&(t=V(),t===tt&&(t=z(),t===tt&&(t=b()))))),Cu[r]={nextPos:pu,result:t},t)}function M(){var r,e,n,u,s,a,o,c,i=38*pu+21,l=Cu[i];return l?(pu=l.nextPos,l.result):(r=pu,e=Z(),e!==tt?(n=H(),n!==tt?(40===t.charCodeAt(pu)?(u=Or,pu++):(u=tt,0===Pu&&h(Br)),u!==tt?(s=H(),s!==tt?(a=j(),a===tt&&(a=null),a!==tt?(o=H(),o!==tt?(41===t.charCodeAt(pu)?(c=Dr,pu++):(c=tt,0===Pu&&h(Yr)),c!==tt?(xu=r,e=$r(e,a),r=e):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt),Cu[i]={nextPos:pu,result:r},r)}function j(){var r,e,n,u,s,a,o,c,i=38*pu+22,l=Cu[i];if(l)return pu=l.nextPos,l.result;if(r=pu,e=S(),e!==tt){for(n=[],u=pu,s=H(),s!==tt?(44===t.charCodeAt(pu)?(a=ut,pu++):(a=tt,0===Pu&&h(st)),a!==tt?(o=H(),o!==tt?(c=S(),c!==tt?(s=[s,a,o,c],u=s):(pu=u,u=tt)):(pu=u,u=tt)):(pu=u,u=tt)):(pu=u,u=tt);u!==tt;)n.push(u),u=pu,s=H(),s!==tt?(44===t.charCodeAt(pu)?(a=ut,pu++):(a=tt,0===Pu&&h(st)),a!==tt?(o=H(),o!==tt?(c=S(),c!==tt?(s=[s,a,o,c],u=s):(pu=u,u=tt)):(pu=u,u=tt)):(pu=u,u=tt)):(pu=u,u=tt);n!==tt?(xu=r,e=Hr(e,n),r=e):(pu=r,r=tt)}else pu=r,r=tt;return Cu[i]={nextPos:pu,result:r},r}function I(){var r,e,n,u=38*pu+23,s=Cu[u];return s?(pu=s.nextPos,s.result):(Pu++,r=pu,64===t.charCodeAt(pu)?(e=Kr,pu++):(e=tt,0===Pu&&h(Wr)),e!==tt?(n=Z(),n!==tt?(xu=r,e=Xr(n),r=e):(pu=r,r=tt)):(pu=r,r=tt),r===tt&&(r=pu,64===t.charCodeAt(pu)?(e=Kr,pu++):(e=tt,0===Pu&&h(Wr)),e!==tt?(n=G(),n!==tt?(xu=r,e=te(n),r=e):(pu=r,r=tt)):(pu=r,r=tt)),Pu--,r===tt&&(e=tt,0===Pu&&h(Jr)),Cu[u]={nextPos:pu,result:r},r)}function U(){var r,e,n,u,s,a,o=38*pu+24,c=Cu[o];return c?(pu=c.nextPos,c.result):(Pu++,r=pu,123===t.charCodeAt(pu)?(e=ee,pu++):(e=tt,0===Pu&&h(ne)),e!==tt?(n=H(),n!==tt?(u=Z(),u!==tt?(s=H(),s!==tt?(125===t.charCodeAt(pu)?(a=ue,pu++):(a=tt,0===Pu&&h(se)),a!==tt?(xu=r,e=ae(u),r=e):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt),Pu--,r===tt&&(e=tt,0===Pu&&h(re)),Cu[o]={nextPos:pu,result:r},r)}function V(){var t,r=38*pu+25,e=Cu[r];return e?(pu=e.nextPos,e.result):(t=G(),t===tt&&(t=D(),t===tt&&(t=Y(),t===tt&&(t=$()))),Cu[r]={nextPos:pu,result:t},t)}function z(){var r,e,n,u,s,a,o=38*pu+26,c=Cu[o];return c?(pu=c.nextPos,c.result):(r=pu,40===t.charCodeAt(pu)?(e=Or,pu++):(e=tt,0===Pu&&h(Br)),e!==tt?(n=H(),n!==tt?(u=S(),u!==tt?(s=H(),s!==tt?(41===t.charCodeAt(pu)?(a=Dr,pu++):(a=tt,0===Pu&&h(Yr)),a!==tt?(xu=r,e=oe(u),r=e):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt)):(pu=r,r=tt),Cu[o]={nextPos:pu,result:r},r)}function Z(){var r,e,n,u,s,a,o,c=38*pu+27,i=Cu[c];if(i)return pu=i.nextPos,i.result;if(Pu++,r=pu,e=pu,n=pu,u=pu,Pu++,s=$(),Pu--,s===tt?u=void 0:(pu=u,u=tt),u!==tt)if(ie.test(t.charAt(pu))?(s=t.charAt(pu),pu++):(s=tt,0===Pu&&h(le)),s!==tt){for(a=[],fe.test(t.charAt(pu))?(o=t.charAt(pu),pu++):(o=tt,0===Pu&&h(he));o!==tt;)a.push(o),fe.test(t.charAt(pu))?(o=t.charAt(pu),pu++):(o=tt,0===Pu&&h(he));a!==tt?(u=[u,s,a],n=u):(pu=n,n=tt)}else pu=n,n=tt;else pu=n,n=tt;return e=n!==tt?t.substring(e,pu):n,e!==tt&&(xu=r,e=Ae(e)),r=e,Pu--,r===tt&&(e=tt,0===Pu&&h(ce)),Cu[c]={nextPos:pu,result:r},r}function G(){var r,e,n,u,s=38*pu+28,a=Cu[s];if(a)return pu=a.nextPos,a.result;if(Pu++,r=pu,34===t.charCodeAt(pu)?(e=pe,pu++):(e=tt,0===Pu&&h(xe)),e!==tt){for(n=[],u=O(),u===tt&&(be.test(t.charAt(pu))?(u=t.charAt(pu),pu++):(u=tt,0===Pu&&h(ge)));u!==tt;)n.push(u),u=O(),u===tt&&(be.test(t.charAt(pu))?(u=t.charAt(pu),pu++):(u=tt,0===Pu&&h(ge)));n!==tt?(34===t.charCodeAt(pu)?(u=pe,pu++):(u=tt,0===Pu&&h(xe)),u!==tt?(xu=r,e=ve(n),r=e):(pu=r,r=tt)):(pu=r,r=tt)}else pu=r,r=tt;if(r===tt)if(r=pu,39===t.charCodeAt(pu)?(e=Pe,pu++):(e=tt,0===Pu&&h(Ce)),e!==tt){for(n=[],u=B(),u===tt&&(ye.test(t.charAt(pu))?(u=t.charAt(pu),pu++):(u=tt,0===Pu&&h(me)));u!==tt;)n.push(u),u=B(),u===tt&&(ye.test(t.charAt(pu))?(u=t.charAt(pu),pu++):(u=tt,0===Pu&&h(me)));n!==tt?(39===t.charCodeAt(pu)?(u=Pe,pu++):(u=tt,0===Pu&&h(Ce)),u!==tt?(xu=r,e=ve(n),r=e):(pu=r,r=tt)):(pu=r,r=tt)}else pu=r,r=tt;return Pu--,r===tt&&(e=tt,0===Pu&&h(de)),Cu[s]={nextPos:pu,result:r},r}function O(){var r,e,n,u,s,a,o,c,i=38*pu+29,l=Cu[i];return l?(pu=l.nextPos,l.result):(Pu++,r=pu,t.substr(pu,2)===Ee?(e=Ee,pu+=2):(e=tt,0===Pu&&h(Qe)),e!==tt&&(xu=r,e=we()),r=e,r===tt&&(r=pu,t.substr(pu,2)===qe?(e=qe,pu+=2):(e=tt,0===Pu&&h(Te)),e!==tt&&(xu=r,e=_e()),r=e,r===tt&&(r=pu,t.substr(pu,2)===Re?(e=Re,pu+=2):(e=tt,0===Pu&&h(Fe)),e!==tt&&(xu=r,e=Le()),r=e,r===tt&&(r=pu,t.substr(pu,2)===ke?(e=ke,pu+=2):(e=tt,0===Pu&&h(Ne)),e!==tt&&(xu=r,e=Me()),r=e,r===tt&&(r=pu,t.substr(pu,2)===je?(e=je,pu+=2):(e=tt,0===Pu&&h(Ie)),e!==tt&&(xu=r,e=Ue()),r=e,r===tt&&(r=pu,t.substr(pu,2)===Ve?(e=Ve,pu+=2):(e=tt,0===Pu&&h(ze)),e!==tt&&(xu=r,e=Ze()),r=e,r===tt&&(r=pu,t.substr(pu,2)===Ge?(e=Ge,pu+=2):(e=tt,0===Pu&&h(Oe)),e!==tt&&(xu=r,e=Be()),r=e,r===tt&&(r=pu,t.substr(pu,2)===De?(e=De,pu+=2):(e=tt,0===Pu&&h(Ye)),e!==tt&&(xu=r,e=$e()),r=e,r===tt&&(r=pu,t.substr(pu,2)===He?(e=He,pu+=2):(e=tt,0===Pu&&h(Je)),e!==tt&&(xu=r,e=Ke()),r=e,r===tt&&(r=pu,t.substr(pu,2)===We?(e=We,pu+=2):(e=tt,0===Pu&&h(Xe)),e!==tt?(n=pu,u=pu,tn.test(t.charAt(pu))?(s=t.charAt(pu),pu++):(s=tt,0===Pu&&h(rn)),s!==tt?(tn.test(t.charAt(pu))?(a=t.charAt(pu),pu++):(a=tt,0===Pu&&h(rn)),a!==tt?(s=[s,a],u=s):(pu=u,u=tt)):(pu=u,u=tt),n=u!==tt?t.substring(n,pu):u,n!==tt?(xu=r,e=en(n),r=e):(pu=r,r=tt)):(pu=r,r=tt),r===tt&&(r=pu,t.substr(pu,2)===nn?(e=nn,pu+=2):(e=tt,0===Pu&&h(un)),e!==tt?(n=pu,u=pu,tn.test(t.charAt(pu))?(s=t.charAt(pu),pu++):(s=tt,0===Pu&&h(rn)),s!==tt?(tn.test(t.charAt(pu))?(a=t.charAt(pu),pu++):(a=tt,0===Pu&&h(rn)),a!==tt?(tn.test(t.charAt(pu))?(o=t.charAt(pu),pu++):(o=tt,0===Pu&&h(rn)),o!==tt?(tn.test(t.charAt(pu))?(c=t.charAt(pu),pu++):(c=tt,0===Pu&&h(rn)),c!==tt?(s=[s,a,o,c],u=s):(pu=u,u=tt)):(pu=u,u=tt)):(pu=u,u=tt)):(pu=u,u=tt),n=u!==tt?t.substring(n,pu):u,n!==tt?(xu=r,e=en(n),r=e):(pu=r,r=tt)):(pu=r,r=tt))))))))))),Pu--,r===tt&&(e=tt,0===Pu&&h(Se)),Cu[i]={nextPos:pu,result:r},r)}function B(){var r,e,n=38*pu+30,u=Cu[n];return u?(pu=u.nextPos,u.result):(Pu++,r=pu,t.substr(pu,2)===an?(e=an,pu+=2):(e=tt,0===Pu&&h(on)),e!==tt&&(xu=r,e=cn()),r=e,Pu--,r===tt&&(e=tt,0===Pu&&h(sn)),Cu[n]={nextPos:pu,result:r},r)}function D(){var r,e,n,u,s,a=38*pu+31,o=Cu[a];if(o)return pu=o.nextPos,o.result;if(Pu++,r=pu,96===t.charCodeAt(pu)?(e=fn,pu++):(e=tt,0===Pu&&h(hn)),e!==tt){for(n=pu,u=[],t.substr(pu,2)===An?(s=An,pu+=2):(s=tt,0===Pu&&h(dn)),s===tt&&(pn.test(t.charAt(pu))?(s=t.charAt(pu),pu++):(s=tt,0===Pu&&h(xn)));s!==tt;)u.push(s),t.substr(pu,2)===An?(s=An,pu+=2):(s=tt,0===Pu&&h(dn)),s===tt&&(pn.test(t.charAt(pu))?(s=t.charAt(pu),pu++):(s=tt,0===Pu&&h(xn)));n=u!==tt?t.substring(n,pu):u,n!==tt?(96===t.charCodeAt(pu)?(u=fn,pu++):(u=tt,0===Pu&&h(hn)),u!==tt?(xu=r,e=bn(n),r=e):(pu=r,r=tt)):(pu=r,r=tt)}else pu=r,r=tt;return Pu--,r===tt&&(e=tt,0===Pu&&h(ln)),Cu[a]={nextPos:pu,result:r},r}function Y(){var r,e,n,u,s,a,o,c,i,l,f,A,d=38*pu+32,p=Cu[d];if(p)return pu=p.nextPos,p.result;if(Pu++,r=pu,e=pu,vn.test(t.charAt(pu))?(n=t.charAt(pu),pu++):(n=tt,0===Pu&&h(Pn)),n===tt&&(n=null),e=n!==tt?t.substring(e,pu):n,e!==tt)if(t.substr(pu,2)===Cn?(n=Cn,pu+=2):(n=tt,0===Pu&&h(yn)),n!==tt){if(u=pu,s=[],mn.test(t.charAt(pu))?(a=t.charAt(pu),pu++):(a=tt,0===Pu&&h(Sn)),a!==tt)for(;a!==tt;)s.push(a),mn.test(t.charAt(pu))?(a=t.charAt(pu),pu++):(a=tt,0===Pu&&h(Sn));else s=tt;u=s!==tt?t.substring(u,pu):s,u!==tt?(xu=r,e=En(e,u),r=e):(pu=r,r=tt)}else pu=r,r=tt;else pu=r,r=tt;if(r===tt){if(r=pu,e=pu,vn.test(t.charAt(pu))?(n=t.charAt(pu),pu++):(n=tt,0===Pu&&h(Pn)),n===tt&&(n=null),e=n!==tt?t.substring(e,pu):n,e!==tt)if(t.substr(pu,2)===Qn?(n=Qn,pu+=2):(n=tt,0===Pu&&h(wn)),n!==tt){if(u=pu,s=[],qn.test(t.charAt(pu))?(a=t.charAt(pu),pu++):(a=tt,0===Pu&&h(Tn)),a!==tt)for(;a!==tt;)s.push(a),qn.test(t.charAt(pu))?(a=t.charAt(pu),pu++):(a=tt,0===Pu&&h(Tn));else s=tt;u=s!==tt?t.substring(u,pu):s,u!==tt?(xu=r,e=_n(e,u),r=e):(pu=r,r=tt)}else pu=r,r=tt;else pu=r,r=tt;if(r===tt){if(r=pu,e=pu,vn.test(t.charAt(pu))?(n=t.charAt(pu),pu++):(n=tt,0===Pu&&h(Pn)),n===tt&&(n=null),e=n!==tt?t.substring(e,pu):n,e!==tt)if(t.substr(pu,2)===Rn?(n=Rn,pu+=2):(n=tt,0===Pu&&h(Fn)),n!==tt){if(u=pu,s=[],tn.test(t.charAt(pu))?(a=t.charAt(pu),pu++):(a=tt,0===Pu&&h(rn)),a!==tt)for(;a!==tt;)s.push(a),tn.test(t.charAt(pu))?(a=t.charAt(pu),pu++):(a=tt,0===Pu&&h(rn));else s=tt;u=s!==tt?t.substring(u,pu):s,u!==tt?(xu=r,e=Ln(e,u),r=e):(pu=r,r=tt)}else pu=r,r=tt;else pu=r,r=tt;if(r===tt){if(r=pu,e=pu,n=pu,vn.test(t.charAt(pu))?(u=t.charAt(pu),pu++):(u=tt,0===Pu&&h(Pn)),u===tt&&(u=null),u!==tt){for(s=[],kn.test(t.charAt(pu))?(a=t.charAt(pu),pu++):(a=tt,0===Pu&&h(Nn));a!==tt;)s.push(a),kn.test(t.charAt(pu))?(a=t.charAt(pu),pu++):(a=tt,0===Pu&&h(Nn));if(s!==tt)if(46===t.charCodeAt(pu)?(a=Mn,pu++):(a=tt,0===Pu&&h(jn)),a!==tt){if(o=[],kn.test(t.charAt(pu))?(c=t.charAt(pu),pu++):(c=tt,0===Pu&&h(Nn)),c!==tt)for(;c!==tt;)o.push(c),kn.test(t.charAt(pu))?(c=t.charAt(pu),pu++):(c=tt,0===Pu&&h(Nn));else o=tt;if(o!==tt){if(c=pu,In.test(t.charAt(pu))?(i=t.charAt(pu),pu++):(i=tt,0===Pu&&h(Un)),i!==tt)if(vn.test(t.charAt(pu))?(l=t.charAt(pu),pu++):(l=tt,0===Pu&&h(Pn)),l===tt&&(l=null),l!==tt){if(f=[],kn.test(t.charAt(pu))?(A=t.charAt(pu),pu++):(A=tt,0===Pu&&h(Nn)),A!==tt)for(;A!==tt;)f.push(A),kn.test(t.charAt(pu))?(A=t.charAt(pu),pu++):(A=tt,0===Pu&&h(Nn));else f=tt;f!==tt?(i=[i,l,f],c=i):(pu=c,c=tt)}else pu=c,c=tt;else pu=c,c=tt;c===tt&&(c=null),c!==tt?(u=[u,s,a,o,c],n=u):(pu=n,n=tt)}else pu=n,n=tt}else pu=n,n=tt;else pu=n,n=tt}else pu=n,n=tt;if(e=n!==tt?t.substring(e,pu):n,e!==tt&&(xu=r,e=Vn(e)),r=e,r===tt){if(r=pu,e=pu,n=pu,vn.test(t.charAt(pu))?(u=t.charAt(pu),pu++):(u=tt,0===Pu&&h(Pn)),u===tt&&(u=null),u!==tt){if(s=[],kn.test(t.charAt(pu))?(a=t.charAt(pu),pu++):(a=tt,0===Pu&&h(Nn)),a!==tt)for(;a!==tt;)s.push(a),kn.test(t.charAt(pu))?(a=t.charAt(pu),pu++):(a=tt,0===Pu&&h(Nn));else s=tt;s!==tt?(u=[u,s],n=u):(pu=n,n=tt)}else pu=n,n=tt;e=n!==tt?t.substring(e,pu):n,e!==tt&&(xu=r,e=zn(e)),r=e}}}}return Pu--,r===tt&&(e=tt,0===Pu&&h(gn)),Cu[d]={nextPos:pu,result:r},r}function $(){var r,e,n=38*pu+33,u=Cu[n];return u?(pu=u.nextPos,u.result):(Pu++,r=pu,t.substr(pu,4)===Gn?(e=Gn,pu+=4):(e=tt,0===Pu&&h(On)),e!==tt&&(xu=r,e=Bn()),r=e,r===tt&&(r=pu,t.substr(pu,5)===Dn?(e=Dn,pu+=5):(e=tt,0===Pu&&h(Yn)),e!==tt&&(xu=r,e=$n()),r=e,r===tt&&(r=pu,t.substr(pu,4)===Hn?(e=Hn,pu+=4):(e=tt,0===Pu&&h(Jn)),e!==tt&&(xu=r,e=Kn()),r=e,r===tt&&(r=pu,t.substr(pu,3)===Wn?(e=Wn,pu+=3):(e=tt,0===Pu&&h(Xn)),e!==tt&&(xu=r,e=tu()),r=e,r===tt&&(r=pu,t.substr(pu,9)===ru?(e=ru,pu+=9):(e=tt,0===Pu&&h(eu)),e!==tt&&(xu=r,e=nu()),r=e)))),Pu--,r===tt&&(e=tt,0===Pu&&h(Zn)),Cu[n]={nextPos:pu,result:r},r)}function H(){var t,r,e=38*pu+34,n=Cu[e];if(n)return pu=n.nextPos,n.result;for(Pu++,t=[],r=J(),r===tt&&(r=K());r!==tt;)t.push(r),r=J(),r===tt&&(r=K());return Pu--,t===tt&&(r=tt,0===Pu&&h(uu)),Cu[e]={nextPos:pu,result:t},t}function J(){var r,e,n,u,s,a,o=38*pu+35,c=Cu[o];if(c)return pu=c.nextPos,c.result;if(Pu++,r=pu,t.substr(pu,2)===au?(e=au,pu+=2):(e=tt,0===Pu&&h(ou)),e!==tt){for(n=[],u=pu,s=pu,Pu++,t.substr(pu,2)===cu?(a=cu,pu+=2):(a=tt,0===Pu&&h(iu)),Pu--,a===tt?s=void 0:(pu=s,s=tt),s!==tt?(t.length>pu?(a=t.charAt(pu),pu++):(a=tt,0===Pu&&h(lu)),a!==tt?(s=[s,a],u=s):(pu=u,u=tt)):(pu=u,u=tt);u!==tt;)n.push(u),u=pu,s=pu,Pu++,t.substr(pu,2)===cu?(a=cu,pu+=2):(a=tt,0===Pu&&h(iu)),Pu--,a===tt?s=void 0:(pu=s,s=tt),s!==tt?(t.length>pu?(a=t.charAt(pu),pu++):(a=tt,0===Pu&&h(lu)),a!==tt?(s=[s,a],u=s):(pu=u,u=tt)):(pu=u,u=tt);n!==tt?(t.substr(pu,2)===cu?(u=cu,pu+=2):(u=tt,0===Pu&&h(iu)),u!==tt?(e=[e,n,u],r=e):(pu=r,r=tt)):(pu=r,r=tt)}else pu=r,r=tt;return Pu--,r===tt&&(e=tt,0===Pu&&h(su)),Cu[o]={nextPos:pu,result:r},r}function K(){var r,e,n=38*pu+36,u=Cu[n];if(u)return pu=u.nextPos,u.result;if(Pu++,r=[],hu.test(t.charAt(pu))?(e=t.charAt(pu),pu++):(e=tt,0===Pu&&h(Au)),e!==tt)for(;e!==tt;)r.push(e),hu.test(t.charAt(pu))?(e=t.charAt(pu),pu++):(e=tt,0===Pu&&h(Au));else r=tt;return Pu--,r===tt&&(e=tt,0===Pu&&h(fu)),Cu[n]={nextPos:pu,result:r},r}function W(){var r,e,n=38*pu+37,u=Cu[n];return u?(pu=u.nextPos,u.result):(Pu++,r=pu,Pu++,t.length>pu?(e=t.charAt(pu),pu++):(e=tt,0===Pu&&h(lu)),Pu--,e===tt?r=void 0:(pu=r,r=tt),Pu--,r===tt&&(e=tt,0===Pu&&h(du)),Cu[n]={nextPos:pu,result:r},r)}e=void 0!==e?e:{};var X,tt={},rt={query:p},et=p,nt=function(t){return t},ut=",",st=s(",",!1),at=function(t,r){return mu("Query").add(yu(t,r,3))},ot=function(t,r){return mu("Path").add(yu(t,r,1))},ct="!",it=s("!",!1),lt=function(t,r,e,n){return mu("Step").add(t,r,n).set(null!==e?{isResult:!0}:{})},ft=i("axis"),ht="//",At=s("//",!1),dt="/",pt=s("/",!1),xt="-//",bt=s("-//",!1),gt="-/",vt=s("-/",!1),Pt="+//",Ct=s("+//",!1),yt="+/",mt=s("+/",!1),St="..//",Et=s("..//",!1),Qt="../",wt=s("../",!1),qt="<//",Tt=s("<//",!1),_t=">//",Rt=s(">//",!1),Ft=function(t,r){return mu("Axis").set({op:t,type:null!==r?r:"*"})},Lt=":",kt=s(":",!1),Nt=function(t){return t.get("id")},Mt=function(t){return t.get("value")},jt=function(t){return mu("Match").merge(t)},It=function(t){return mu("Match").set({id:t.get("value")})},Ut="*",Vt=s("*",!1),zt=function(){return mu("Match").set({id:"*"})},Zt="[",Gt=s("[",!1),Ot="]",Bt=s("]",!1),Dt=function(t){return mu("Filter").add(t)},Yt="?:",$t=s("?:",!1),Ht=function(t,r){return mu("ConditionalBinary").add(t,r)},Jt="?",Kt=s("?",!1),Wt=function(t,r,e){return mu("ConditionalTernary").add(t,r,e)},Xt="||",tr=s("||",!1),rr=function(t,r,e){return mu("Logical").set({op:r}).add(t,e)},er="&&",nr=s("&&",!1),ur="|",sr=s("|",!1),ar=function(t,r,e){return mu("Bitwise").set({op:r}).add(t,e)},or="^",cr=s("^",!1),ir="&",lr=s("&",!1),fr="==",hr=s("==",!1),Ar="!=",dr=s("!=",!1),pr="<=",xr=s("<=",!1),br=">=",gr=s(">=",!1),vr="<",Pr=s("<",!1),Cr=">",yr=s(">",!1),mr="=~",Sr=s("=~",!1),Er="!~",Qr=s("!~",!1),wr=function(t,r,e){return mu("Relational").set({op:r}).add(t,e)},qr="<<",Tr=s("<<",!1),_r=">>",Rr=s(">>",!1),Fr="+",Lr=s("+",!1),kr="-",Nr=s("-",!1),Mr=function(t,r,e){return mu("Arithmetical").set({op:r}).add(t,e)},jr="**",Ir=s("**",!1),Ur="%",Vr=s("%",!1),zr="~",Zr=s("~",!1),Gr=function(t,r){return mu("Unary").set({op:t}).add(r)},Or="(",Br=s("(",!1),Dr=")",Yr=s(")",!1),$r=function(t,r){return mu("FuncCall").merge(t).add(r)},Hr=function(t,r){return yu(t,r,3)},Jr=i("node attribute"),Kr="@",Wr=s("@",!1),Xr=function(t){return mu("Attribute").merge(t)},te=function(t){return mu("Attribute").set({id:t.get("value")})},re=i("query parameter reference"),ee="{",ne=s("{",!1),ue="}",se=s("}",!1),ae=function(t){return mu("Param").merge(t)},oe=function(t){return t},ce=i("identifier"),ie=/^[a-zA-Z_]/,le=a([["a","z"],["A","Z"],"_"],!1,!1),fe=/^[a-zA-Z0-9_\-]/,he=a([["a","z"],["A","Z"],["0","9"],"_","-"],!1,!1),Ae=function(t){return mu("Identifier").set({id:t})},de=i("quoted string literal"),pe='"',xe=s('"',!1),be=/^[^"]/,ge=a(['"'],!0,!1),ve=function(t){return mu("LiteralString").set({value:t.join("")})},Pe="'",Ce=s("'",!1),ye=/^[^']/,me=a(["'"],!0,!1),Se=i("escaped double-quoted-string character"),Ee="\\\\",Qe=s("\\\\",!1),we=function(){return"\\"},qe='\\"',Te=s('\\"',!1),_e=function(){return'"'},Re="\\b",Fe=s("\\b",!1),Le=function(){return"\b"},ke="\\v",Ne=s("\\v",!1),Me=function(){return"\v"},je="\\f",Ie=s("\\f",!1),Ue=function(){return"\f"},Ve="\\t",ze=s("\\t",!1),Ze=function(){return"\t"},Ge="\\r",Oe=s("\\r",!1),Be=function(){return"\r"},De="\\n",Ye=s("\\n",!1),$e=function(){return"\n"},He="\\e",Je=s("\\e",!1),Ke=function(){return""},We="\\x",Xe=s("\\x",!1),tn=/^[0-9a-fA-F]/,rn=a([["0","9"],["a","f"],["A","F"]],!1,!1),en=function(t){return String.fromCharCode(parseInt(t,16))},nn="\\u",un=s("\\u",!1),sn=i("escaped single-quoted-string character"),an="\\'",on=s("\\'",!1),cn=function(){return"'"},ln=i("regular expression literal"),fn="`",hn=s("`",!1),An="\\`",dn=s("\\`",!1),pn=/^[^`]/,xn=a(["`"],!0,!1),bn=function(t){var r;try{r=new RegExp(t.replace(/\\`/g,"`"))}catch(t){u(t.message)}return mu("LiteralRegExp").set({value:r})},gn=i("numeric literal"),vn=/^[+\-]/,Pn=a(["+","-"],!1,!1),Cn="0b",yn=s("0b",!1),mn=/^[01]/,Sn=a(["0","1"],!1,!1),En=function(t,r){return mu("LiteralNumber").set({value:parseInt(t+r,2)})},Qn="0o",wn=s("0o",!1),qn=/^[0-7]/,Tn=a([["0","7"]],!1,!1),_n=function(t,r){return mu("LiteralNumber").set({value:parseInt(t+r,8)})},Rn="0x",Fn=s("0x",!1),Ln=function(t,r){return mu("LiteralNumber").set({value:parseInt(t+r,16)})},kn=/^[0-9]/,Nn=a([["0","9"]],!1,!1),Mn=".",jn=s(".",!1),In=/^[eE]/,Un=a(["e","E"],!1,!1),Vn=function(t){return mu("LiteralNumber").set({value:parseFloat(t)})},zn=function(t){return mu("LiteralNumber").set({value:parseInt(t,10)})},Zn=i("global value"),Gn="true",On=s("true",!1),Bn=function(){return mu("LiteralValue").set({value:!0})},Dn="false",Yn=s("false",!1),$n=function(){return mu("LiteralValue").set({value:!1})},Hn="null",Jn=s("null",!1),Kn=function(){return mu("LiteralValue").set({value:null})},Wn="NaN",Xn=s("NaN",!1),tu=function(){return mu("LiteralValue").set({value:NaN})},ru="undefined",eu=s("undefined",!1),nu=function(){return mu("LiteralValue").set({value:void 0})},uu=i("optional blank"),su=i("multi-line comment"),au="/*",ou=s("/*",!1),cu="*/",iu=s("*/",!1),lu=o(),fu=i("any whitespaces"),hu=/^[ \t\r\n]/,Au=a([" ","\t","\r","\n"],!1,!1),du=i("end of file"),pu=0,xu=0,bu=[{line:1,column:1}],gu=0,vu=[],Pu=0,Cu={};if("startRule"in e){if(!(e.startRule in rt))throw new Error("Can't start parsing from rule \""+e.startRule+'".');et=rt[e.startRule]}var yu=e.util.makeUnroll(n,e),mu=e.util.makeAST(n,e);if(X=et(),X!==tt&&pu===t.length)return X;throw X!==tt&&pu<t.length&&h(c()),d(vu,gu<t.length?t.charAt(gu):null,gu<t.length?f(gu,gu+1):f(gu,gu))}return t(r,Error),r.buildMessage=function(t,r){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}function n(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+e(t)})}function u(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+e(t)})}function s(t){return c[t.type](t)}function a(t){var r,e,n=new Array(t.length);for(r=0;r<t.length;r++)n[r]=s(t[r]);if(n.sort(),n.length>0){for(r=1,e=1;r<n.length;r++)n[r-1]!==n[r]&&(n[e]=n[r],e++);n.length=e}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}function o(t){return t?'"'+n(t)+'"':"end of input"}var c={literal:function(t){return'"'+n(t.text)+'"'},class:function(t){var r,e="";for(r=0;r<t.parts.length;r++)e+=t.parts[r]instanceof Array?u(t.parts[r][0])+"-"+u(t.parts[r][1]):u(t.parts[r]);return"["+(t.inverted?"^":"")+e+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};return"Expected "+a(t)+" but "+o(r)+" found."},{SyntaxError:r,parse:e}}(),ASTQQuery=function(){function t(r){_classCallCheck(this,t),this.asty=new ASTY,this.ast=null,r&&this.compile(r)}return _createClass(t,[{key:"compile",value:function(t,r){var e=this;r&&console.log("ASTQ: compile: +-------------------------------------------------------------------------------------------------------\nASTQ: compile: | "+t);var n=PEGUtil.parse(ASTQQueryParse,t,{startRule:"query",makeAST:function(t,r,n,u){return e.asty.create.apply(e.asty,u).pos(t,r,n)}});if(null!==n.error)throw new Error("ASTQ: compile: query parsing failed:\n"+PEGUtil.errorMessage(n.error,!0).replace(/^/gm,"ERROR: "));return this.ast=n.ast,r&&console.log("ASTQ: compile: +-------------------------------------------------------------------------------------------------------\n"+this.dump().replace(/\n$/,"").replace(/^/gm,"ASTQ: compile: | ")),this}},{key:"dump",value:function(){return this.ast.dump()}},{key:"execute",value:function(t,r,e,n,u){u&&console.log("ASTQ: execute: +--------------------------------------------------------------+----------------------------------------");var s=new _astqQueryExec2.default(r,e,n,u);return s.execQuery(this.ast,t)}}]),t}();exports.default=ASTQQuery;
},{"./astq-query-exec.js":11,"asty":1,"pegjs-util":3}],14:[function(_dereq_,module,exports){
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),ASTQUtil=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"pad",value:function e(n,t){var r=t<0?-t:t;if(n.length>r)n=n.substr(0,r);else{var e=Array(r+1-n.length).join(" ");n=t<0?n+e:e+n}return n}},{key:"truthy",value:function(e){var n=void 0;switch("undefined"==typeof e?"undefined":_typeof(e)){case"boolean":n=e;break;case"number":n=0!==e&&!isNaN(e);break;case"string":n=""!==e;break;case"object":n=!1,null!==e&&(n=!0,e instanceof Array&&(n=e.length>0));break;default:n=!1}return n}},{key:"coerce",value:function(e,n){if(("undefined"==typeof e?"undefined":_typeof(e))!==n)try{switch(n){case"boolean":"boolean"!=typeof e&&(e=Boolean(e));break;case"number":"number"!=typeof e&&(e=Number(e));break;case"string":"string"!=typeof e&&(e=String(e));break;case"regexp":"object"===("undefined"==typeof e?"undefined":_typeof(e))&&e instanceof RegExp||(e=new RegExp(e))}}catch(e){throw new Error("cannot coerce value into type "+n)}return e}}]),e}();exports.default=ASTQUtil;
},{}],15:[function(_dereq_,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var version={major:2,minor:0,micro:0,date:20161120};exports.default=version;
},{}],16:[function(_dereq_,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_astqAdapter=_dereq_("./astq-adapter.js"),_astqAdapter2=_interopRequireDefault(_astqAdapter),_astqAdapterXmldom=_dereq_("./astq-adapter-xmldom.js"),_astqAdapterXmldom2=_interopRequireDefault(_astqAdapterXmldom),_astqAdapterParse=_dereq_("./astq-adapter-parse5.js"),_astqAdapterParse2=_interopRequireDefault(_astqAdapterParse),_astqAdapterMozast=_dereq_("./astq-adapter-mozast.js"),_astqAdapterMozast2=_interopRequireDefault(_astqAdapterMozast),_astqAdapterAsty=_dereq_("./astq-adapter-asty.js"),_astqAdapterAsty2=_interopRequireDefault(_astqAdapterAsty),_astqFuncs=_dereq_("./astq-funcs.js"),_astqFuncs2=_interopRequireDefault(_astqFuncs),_astqFuncsStd=_dereq_("./astq-funcs-std.js"),_astqFuncsStd2=_interopRequireDefault(_astqFuncsStd),_astqQuery=_dereq_("./astq-query.js"),_astqQuery2=_interopRequireDefault(_astqQuery),_astqVersion=_dereq_("./astq-version.js"),_astqVersion2=_interopRequireDefault(_astqVersion),CacheLRU=_dereq_("cache-lru"),ASTQ=function(){function e(){_classCallCheck(this,e),this._adapter=(new _astqAdapter2.default).register(_astqAdapterXmldom2.default,!1).register(_astqAdapterParse2.default,!1).register(_astqAdapterMozast2.default,!1).register(_astqAdapterAsty2.default,!1),this._funcs=new _astqFuncs2.default;for(var t in _astqFuncsStd2.default)this.func(t,_astqFuncsStd2.default[t]);this._cache=new CacheLRU}return _createClass(e,[{key:"version",value:function(){return _astqVersion2.default}},{key:"adapter",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(arguments.length<1||arguments.length>2)throw new Error("ASTQ#adapter: invalid number of arguments");if(this._adapter.unregister(),"object"===("undefined"==typeof e?"undefined":_typeof(e))&&e instanceof Array||(e=[e]),e.length>1&&r)throw new Error("ASTQ#adapter: you can force just a single adapter to not taste the AST node");return e.forEach(function(e){if("string"==typeof e)if("mozast"===e)e=_astqAdapterMozast2.default;else if("xmldom"===e)e=_astqAdapterXmldom2.default;else if("parse5"===e)e=_astqAdapterParse2.default;else{if("asty"!==e)throw new Error("ASTQ#adapter: unknown built-in adapter");e=_astqAdapterAsty2.default}t._adapter.register(e,r)}),this}},{key:"func",value:function(e,t){if(2!==arguments.length)throw new Error("ASTQ#func: invalid number of arguments");return this._funcs.register(e,t),this}},{key:"cache",value:function(e){if(1!==arguments.length)throw new Error("ASTQ#cache: invalid number of arguments");return this._cache.limit(e),this}},{key:"compile",value:function(e,t){if(arguments.length<1)throw new Error("ASTQ#compile: too less arguments");if(arguments.length>2)throw new Error("ASTQ#compile: too many arguments");void 0===t&&(t=!1);var r=this._cache.get(e);return void 0===r&&(r=new _astqQuery2.default,r.compile(e,t),this._cache.set(e,r)),r}},{key:"execute",value:function(e,t,r,a){if(arguments.length<2)throw new Error("ASTQ#execute: too less arguments");if(arguments.length>4)throw new Error("ASTQ#execute: too many arguments");void 0===r&&(r={}),void 0===a&&(a=!1);var s=this._adapter.select(e);if(void 0===s)throw new Error("ASTQ#execute: no suitable adapter found for node");return t.execute(e,s,r,this._funcs,a)}},{key:"query",value:function(e,t,r,a){if(arguments.length<2)throw new Error("ASTQ#query: too less arguments");if(arguments.length>4)throw new Error("ASTQ#query: too many arguments");return void 0===r&&(r={}),void 0===a&&(a=!1),this.execute(e,this.compile(t,a),r,a)}}]),e}();module.exports=ASTQ;
},{"./astq-adapter-asty.js":4,"./astq-adapter-mozast.js":5,"./astq-adapter-parse5.js":6,"./astq-adapter-xmldom.js":7,"./astq-adapter.js":8,"./astq-funcs-std.js":9,"./astq-funcs.js":10,"./astq-query.js":13,"./astq-version.js":15,"cache-lru":2}]},{},[4,5,6,7,8,9,10,11,12,13,14,15,16])(16)
});


//# sourceMappingURL=astq.browser.map